# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended that you check this file into your version control system.

ActiveRecord::Schema.define(version: 20180517190014) do

  create_table "answer_selections", force: :cascade do |t|
    t.integer "user_id",   limit: 4
    t.integer "aid",       limit: 4
    t.boolean "liking",              default: false
    t.boolean "following",           default: false
  end

  add_index "answer_selections", ["user_id", "aid"], name: "index_answer_selections_on_user_id_and_aid", using: :btree

  create_table "answers", force: :cascade do |t|
    t.integer  "uid",          limit: 4,          default: 0,     null: false
    t.integer  "nid",          limit: 4,          default: 0,     null: false
    t.text     "content",      limit: 4294967295,                 null: false
    t.integer  "cached_likes", limit: 4,          default: 0
    t.datetime "created_at",                                      null: false
    t.datetime "updated_at",                                      null: false
    t.boolean  "accepted",                        default: false
  end

  add_index "answers", ["uid", "nid"], name: "index_answers_on_uid_and_nid", using: :btree

  create_table "comments", primary_key: "cid", force: :cascade do |t|
    t.integer "pid",         limit: 4,          default: 0,  null: false
    t.integer "nid",         limit: 4,          default: 0,  null: false
    t.integer "uid",         limit: 4,          default: 0,  null: false
    t.string  "subject",     limit: 64,         default: "", null: false
    t.text    "comment",     limit: 4294967295,              null: false
    t.string  "hostname",    limit: 128,        default: "", null: false
    t.integer "timestamp",   limit: 4,          default: 0,  null: false
    t.integer "status",      limit: 4,          default: 1,  null: false
    t.integer "format",      limit: 2,          default: 0,  null: false
    t.string  "thread",      limit: 255
    t.string  "name",        limit: 60
    t.string  "mail",        limit: 64
    t.string  "homepage",    limit: 255
    t.integer "aid",         limit: 4,          default: 0,  null: false
    t.integer "comment_via", limit: 4,          default: 0
    t.string  "message_id",  limit: 255
  end

  add_index "comments", ["comment"], name: "index_comments_on_comment", type: :fulltext if ActiveRecord::Base.connection.adapter_name == 'Mysql2'
  add_index "comments", ["nid"], name: "index_comments_nid", using: :btree
  add_index "comments", ["pid"], name: "index_comments_pid", using: :btree
  add_index "comments", ["status"], name: "index_comments_status", using: :btree

  create_table "community_tags", id: false, force: :cascade do |t|
    t.integer "tid",  limit: 4, default: 0, null: false
    t.integer "nid",  limit: 4, default: 0, null: false
    t.integer "uid",  limit: 4, default: 0, null: false
    t.integer "date", limit: 4, default: 0, null: false
  end

  add_index "community_tags", ["nid"], name: "index_community_tags_nid", using: :btree
  add_index "community_tags", ["tid", "nid"], name: "tid_nid", using: :btree
  add_index "community_tags", ["tid"], name: "index_community_tags_tid", using: :btree
  add_index "community_tags", ["uid"], name: "index_community_tags_uid", using: :btree

  create_table "content_field_image_gallery", id: false, force: :cascade do |t|
    t.integer "vid",                      limit: 4,     default: 0, null: false
    t.integer "nid",                      limit: 4,     default: 0, null: false
    t.integer "delta",                    limit: 4,     default: 0, null: false
    t.integer "field_image_gallery_fid",  limit: 4
    t.integer "field_image_gallery_list", limit: 1
    t.text    "field_image_gallery_data", limit: 65535
  end

  add_index "content_field_image_gallery", ["nid"], name: "index_content_field_image_gallery_nid", using: :btree

  create_table "content_field_main_image", primary_key: "vid", force: :cascade do |t|
    t.integer "nid",                   limit: 4,     default: 0, null: false
    t.integer "field_main_image_fid",  limit: 4
    t.integer "field_main_image_list", limit: 1
    t.text    "field_main_image_data", limit: 65535
  end

  add_index "content_field_main_image", ["nid"], name: "index_content_field_main_image_nid", using: :btree

  create_table "content_field_map_editor", id: false, force: :cascade do |t|
    t.integer "vid",                    limit: 4,          default: 0, null: false
    t.integer "nid",                    limit: 4,          default: 0, null: false
    t.integer "delta",                  limit: 4,          default: 0, null: false
    t.text    "field_map_editor_value", limit: 4294967295
  end

  add_index "content_field_map_editor", ["nid"], name: "index_content_field_map_editor_nid", using: :btree

  create_table "content_field_mappers", id: false, force: :cascade do |t|
    t.integer "vid",                 limit: 4,          default: 0, null: false
    t.integer "nid",                 limit: 4,          default: 0, null: false
    t.integer "delta",               limit: 4,          default: 0, null: false
    t.text    "field_mappers_value", limit: 4294967295
  end

  add_index "content_field_mappers", ["nid"], name: "index_content_field_mappers_nid", using: :btree

  create_table "content_type_map", primary_key: "vid", force: :cascade do |t|
    t.integer "nid",                             limit: 4,                                   default: 0, null: false
    t.string  "field_publication_date_value",    limit: 20
    t.string  "field_capture_date_value",        limit: 20
    t.text    "field_geotiff_url_value",         limit: 4294967295
    t.text    "field_google_maps_url_value",     limit: 4294967295
    t.text    "field_openlayers_url_value",      limit: 4294967295
    t.text    "field_tms_url_value",             limit: 4294967295
    t.text    "field_jpg_url_value",             limit: 4294967295
    t.text    "field_license_value",             limit: 4294967295
    t.text    "field_raw_images_value",          limit: 4294967295
    t.text    "field_cartographer_notes_value",  limit: 4294967295
    t.integer "field_cartographer_notes_format", limit: 4
    t.text    "field_notes_value",               limit: 4294967295
    t.integer "field_notes_format",              limit: 4
    t.text    "field_mbtiles_url_value",         limit: 4294967295
    t.integer "field_zoom_min_value",            limit: 4
    t.decimal "field_ground_resolution_value",                      precision: 10, scale: 2
    t.decimal "field_geotiff_filesize_value",                       precision: 10, scale: 1
    t.decimal "field_jpg_filesize_value",                           precision: 10, scale: 1
    t.decimal "field_raw_images_filesize_value",                    precision: 10, scale: 1
    t.text    "field_tms_tile_type_value",       limit: 4294967295
    t.integer "field_zoom_max_value",            limit: 4
    t.string  "authorship",                      limit: 255
  end

  add_index "content_type_map", ["nid"], name: "index_content_type_map_nid", using: :btree

  create_table "files", primary_key: "fid", force: :cascade do |t|
    t.integer "uid",       limit: 4,   default: 0,  null: false
    t.string  "filename",  limit: 255, default: "", null: false
    t.string  "filepath",  limit: 255, default: "", null: false
    t.string  "filemime",  limit: 255, default: "", null: false
    t.integer "filesize",  limit: 4,   default: 0,  null: false
    t.integer "status",    limit: 4,   default: 0,  null: false
    t.integer "timestamp", limit: 4,   default: 0,  null: false
  end

  add_index "files", ["status"], name: "index_files_status", using: :btree
  add_index "files", ["timestamp"], name: "index_files_timestamp", using: :btree
  add_index "files", ["uid"], name: "index_files_uid", using: :btree

  create_table "friendly_id_slugs", force: :cascade do |t|
    t.string   "slug",           limit: 255, null: false
    t.integer  "sluggable_id",   limit: 4,   null: false
    t.string   "sluggable_type", limit: 40
    t.datetime "created_at"
  end

  create_table "images", force: :cascade do |t|
    t.string   "title",              limit: 255
    t.integer  "uid",                limit: 4
    t.integer  "nid",                limit: 4
    t.string   "notes",              limit: 255
    t.integer  "version",            limit: 4,   default: 0
    t.string   "photo_file_name",    limit: 255
    t.string   "photo_content_type", limit: 255
    t.string   "photo_file_size",    limit: 255
    t.datetime "created_at",                                 null: false
    t.datetime "updated_at",                                 null: false
    t.string   "remote_url",         limit: 255
    t.integer  "vid",                limit: 4,   default: 0
  end

  create_table "impressions", force: :cascade do |t|
    t.string   "impressionable_type", limit: 255
    t.integer  "impressionable_id",   limit: 4
    t.integer  "user_id",             limit: 4
    t.string   "controller_name",     limit: 255
    t.string   "action_name",         limit: 255
    t.string   "view_name",           limit: 255
    t.string   "request_hash",        limit: 255
    t.string   "ip_address",          limit: 255
    t.string   "session_hash",        limit: 255
    t.text     "message",             limit: 65535
    t.text     "referrer",            limit: 65535
    t.text     "params",              limit: 65535
    t.datetime "created_at",                        null: false
    t.datetime "updated_at",                        null: false
  end

  add_index "impressions", ["controller_name", "action_name", "ip_address"], name: "controlleraction_ip_index", using: :btree
  add_index "impressions", ["controller_name", "action_name", "request_hash"], name: "controlleraction_request_index", using: :btree
  add_index "impressions", ["controller_name", "action_name", "session_hash"], name: "controlleraction_session_index", using: :btree
  add_index "impressions", ["impressionable_id"], name: "index_impressions_on_impressionable_id", using: :btree
  add_index "impressions", ["impressionable_type", "impressionable_id", "ip_address"], name: "poly_ip_index", using: :btree
  add_index "impressions", ["impressionable_type", "impressionable_id", "params"], name: "poly_params_request_index", length: {"impressionable_type"=>nil, "impressionable_id"=>nil, "params"=>255}, using: :btree
  add_index "impressions", ["impressionable_type", "impressionable_id", "request_hash"], name: "poly_request_index", using: :btree
  add_index "impressions", ["impressionable_type", "impressionable_id", "session_hash"], name: "poly_session_index", using: :btree
  add_index "impressions", ["impressionable_type", "message", "impressionable_id"], name: "impressionable_type_message_index", length: {"impressionable_type"=>nil, "message"=>255, "impressionable_id"=>nil}, using: :btree
  add_index "impressions", ["impressionable_type"], name: "index_impressions_on_impressionable_type", using: :btree
  add_index "impressions", ["user_id"], name: "index_impressions_on_user_id", using: :btree

  create_table "likes", force: :cascade do |t|
    t.integer  "likeable_id",   limit: 4
    t.integer  "user_id",       limit: 4
    t.string   "likeable_type", limit: 255
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  create_table "node", primary_key: "nid", force: :cascade do |t|
    t.integer "vid",                         limit: 4,   default: 0,  null: false
    t.string  "type",                        limit: 32,  default: "", null: false
    t.string  "language",                    limit: 12,  default: "", null: false
    t.string  "title",                       limit: 255, default: "", null: false
    t.integer "uid",                         limit: 4,   default: 0,  null: false
    t.integer "status",                      limit: 4,   default: 1,  null: false
    t.integer "created",                     limit: 4,   default: 0,  null: false
    t.integer "changed",                     limit: 4,   default: 0,  null: false
    t.integer "comment",                     limit: 4,   default: 0,  null: false
    t.integer "promote",                     limit: 4,   default: 0,  null: false
    t.integer "moderate",                    limit: 4,   default: 0,  null: false
    t.integer "sticky",                      limit: 4,   default: 0,  null: false
    t.integer "tnid",                        limit: 4,   default: 0,  null: false
    t.integer "translate",                   limit: 4,   default: 0,  null: false
    t.integer "cached_likes",                limit: 4,   default: 0
    t.integer "comments_count",              limit: 4,   default: 0
    t.integer "drupal_node_revisions_count", limit: 4,   default: 0
    t.string  "path",                        limit: 255
    t.integer "main_image_id",               limit: 4
    t.string  "slug",                        limit: 255
    t.integer "legacy_views",                limit: 4,   default: 0
    t.integer "views",                       limit: 4,   default: 0
  end

  add_index "node", ["changed"], name: "node_changed", using: :btree
  add_index "node", ["created"], name: "node_created", using: :btree
  add_index "node", ["moderate"], name: "node_moderate", using: :btree
  add_index "node", ["promote", "status"], name: "node_promote_status", using: :btree
  add_index "node", ["slug"], name: "index_node_on_slug", using: :btree
  add_index "node", ["status", "type", "nid"], name: "node_status_type", using: :btree
  add_index "node", ["title", "type"], name: "node_title_type", using: :btree
  add_index "node", ["tnid"], name: "index_node_tnid", using: :btree
  add_index "node", ["translate"], name: "index_node_translate", using: :btree
  add_index "node", ["type"], name: "node_type", using: :btree
  add_index "node", ["uid"], name: "index_node_uid", using: :btree
  add_index "node", ["vid"], name: "index_node_vid", using: :btree

  create_table "node_access", id: false, force: :cascade do |t|
    t.integer "nid",          limit: 4,   default: 0,  null: false
    t.integer "gid",          limit: 4,   default: 0,  null: false
    t.string  "realm",        limit: 255, default: "", null: false
    t.integer "grant_view",   limit: 1,   default: 0,  null: false
    t.integer "grant_update", limit: 1,   default: 0,  null: false
    t.integer "grant_delete", limit: 1,   default: 0,  null: false
  end

  create_table "node_revisions", primary_key: "vid", force: :cascade do |t|
    t.integer "nid",       limit: 4,          default: 0,  null: false
    t.integer "uid",       limit: 4,          default: 0,  null: false
    t.string  "title",     limit: 255,        default: "", null: false
    t.text    "body",      limit: 4294967295,              null: false
    t.text    "teaser",    limit: 65535
    t.text    "log",       limit: 65535
    t.integer "timestamp", limit: 4,          default: 0,  null: false
    t.integer "format",    limit: 4,          default: 0,  null: false
    t.integer "status",    limit: 4,          default: 1
  end

  add_index "node_revisions", ["body", "title"], name: "index_node_revisions_on_body_and_title", type: :fulltext if ActiveRecord::Base.connection.adapter_name == 'Mysql2'
  add_index "node_revisions", ["nid"], name: "index_node_revisions_nid", using: :btree
  add_index "node_revisions", ["timestamp"], name: "index_node_revisions_timestamp", using: :btree
  add_index "node_revisions", ["uid"], name: "index_node_revisions_uid", using: :btree

  create_table "node_selections", id: false, force: :cascade do |t|
    t.integer "user_id",   limit: 4
    t.integer "nid",       limit: 4
    t.boolean "following",           default: false
    t.boolean "liking",              default: false
  end

  add_index "node_selections", ["user_id", "nid"], name: "index_node_selections_on_user_id_and_nid", unique: true, using: :btree

  create_table "profile_fields", primary_key: "fid", force: :cascade do |t|
    t.string  "title",        limit: 255
    t.string  "name",         limit: 128,   default: "", null: false
    t.text    "explanation",  limit: 65535
    t.string  "category",     limit: 255
    t.string  "page",         limit: 255
    t.string  "type",         limit: 128
    t.integer "weight",       limit: 1,     default: 0,  null: false
    t.integer "required",     limit: 1,     default: 0,  null: false
    t.integer "register",     limit: 1,     default: 0,  null: false
    t.integer "visibility",   limit: 1,     default: 0,  null: false
    t.integer "autocomplete", limit: 1,     default: 0,  null: false
    t.text    "options",      limit: 65535
  end

  add_index "profile_fields", ["category"], name: "index_profile_fields_category", using: :btree
  add_index "profile_fields", ["name"], name: "index_profile_fields_name", using: :btree

  create_table "profile_values", id: false, force: :cascade do |t|
    t.integer "fid",   limit: 4,     default: 0, null: false
    t.integer "uid",   limit: 4,     default: 0, null: false
    t.text    "value", limit: 65535
  end

  add_index "profile_values", ["fid"], name: "index_profile_values_fid", using: :btree
  add_index "profile_values", ["uid"], name: "index_profile_values_on_uid", using: :btree

  create_table "relationships", force: :cascade do |t|
    t.integer  "follower_id", limit: 4
    t.integer  "followed_id", limit: 4
    t.datetime "created_at",            null: false
    t.datetime "updated_at",            null: false
  end

  add_index "relationships", ["followed_id"], name: "index_relationships_on_followed_id", using: :btree
  add_index "relationships", ["follower_id", "followed_id"], name: "index_relationships_on_follower_id_and_followed_id", unique: true, using: :btree
  add_index "relationships", ["follower_id"], name: "index_relationships_on_follower_id", using: :btree

  create_table "rsessions", force: :cascade do |t|
    t.string   "session_id", limit: 255,   null: false
    t.text     "data",       limit: 65535
    t.datetime "created_at",               null: false
    t.datetime "updated_at",               null: false
  end

  add_index "rsessions", ["session_id"], name: "index_rsessions_on_session_id", using: :btree
  add_index "rsessions", ["updated_at"], name: "index_rsessions_on_updated_at", using: :btree

  create_table "rusers", force: :cascade do |t|
    t.string   "username",           limit: 255
    t.string   "email",              limit: 255
    t.string   "crypted_password",   limit: 255
    t.string   "password_salt",      limit: 255
    t.string   "persistence_token",  limit: 255
    t.integer  "login_count",        limit: 4,          default: 0,       null: false
    t.integer  "failed_login_count", limit: 4,          default: 0,       null: false
    t.datetime "last_request_at"
    t.datetime "current_login_at"
    t.datetime "last_login_at"
    t.string   "current_login_ip",   limit: 255
    t.string   "last_login_ip",      limit: 255
    t.datetime "created_at",                                              null: false
    t.datetime "updated_at",                                              null: false
    t.string   "openid_identifier",  limit: 255
    t.string   "role",               limit: 255,        default: "basic"
    t.string   "reset_key",          limit: 255
    t.string   "photo_file_name",    limit: 255
    t.string   "photo_content_type", limit: 255
    t.string   "photo_file_size",    limit: 255
    t.text     "bio",                limit: 4294967295
    t.string   "token",              limit: 255
    t.integer  "status",             limit: 4,          default: 0
  end

  add_index "rusers", ["created_at"], name: "index_rusers_created_at", using: :btree
  add_index "rusers", ["email"], name: "index_rusers_on_email", using: :btree
  add_index "rusers", ["persistence_token"], name: "index_rusers_on_persistence_token", using: :btree
  add_index "rusers", ["status"], name: "index_rusers_on_status", using: :btree
  add_index "rusers", ["username", "bio"], name: "index_rusers_on_username_and_bio", type: :fulltext  if ActiveRecord::Base.connection.adapter_name == 'Mysql2'
  add_index "rusers", ["username"], name: "index_rusers_on_username", using: :btree

  create_table "tag_selections", id: false, force: :cascade do |t|
    t.integer "user_id",   limit: 4
    t.integer "tid",       limit: 4
    t.boolean "following",           default: false
  end

  add_index "tag_selections", ["user_id", "tid"], name: "index_tag_selections_on_user_id_and_tid", unique: true, using: :btree

  create_table "term_data", primary_key: "tid", force: :cascade do |t|
    t.integer "vid",         limit: 4,          default: 0,  null: false
    t.string  "name",        limit: 255,        default: "", null: false
    t.text    "description", limit: 4294967295
    t.integer "weight",      limit: 1,          default: 0,  null: false
    t.integer "count",       limit: 4
    t.string  "parent",      limit: 255
  end

  add_index "term_data", ["name"], name: "index_term_data_on_name", using: :btree
  add_index "term_data", ["parent"], name: "index_term_data_on_parent", using: :btree
  add_index "term_data", ["vid", "name"], name: "index_term_data_vid_name", using: :btree
  add_index "term_data", ["vid", "weight", "name"], name: "index_vid_weight_name", using: :btree

  create_table "term_node", id: false, force: :cascade do |t|
    t.integer "nid", limit: 4, default: 0, null: false
    t.integer "vid", limit: 4, default: 0, null: false
    t.integer "tid", limit: 4, default: 0, null: false
  end

  add_index "term_node", ["nid"], name: "index_term_node_nid", using: :btree
  add_index "term_node", ["vid"], name: "index_term_node_vid", using: :btree

  create_table "upload", id: false, force: :cascade do |t|
    t.integer "fid",         limit: 4,   default: 0,  null: false
    t.integer "nid",         limit: 4,   default: 0,  null: false
    t.integer "vid",         limit: 4,   default: 0,  null: false
    t.string  "description", limit: 255, default: "", null: false
    t.integer "list",        limit: 1,   default: 0,  null: false
    t.integer "weight",      limit: 1,   default: 0,  null: false
  end

  add_index "upload", ["fid"], name: "index_upload_fid", using: :btree
  add_index "upload", ["nid"], name: "index_upload_nid", using: :btree

  create_table "user_selections", id: false, force: :cascade do |t|
    t.integer "self_id",   limit: 4
    t.integer "other_id",  limit: 4
    t.boolean "following",           default: false
  end

  add_index "user_selections", ["self_id", "other_id"], name: "index_user_selections_on_self_id_and_other_id", unique: true, using: :btree

  create_table "user_tags", force: :cascade do |t|
    t.integer  "uid",        limit: 4
    t.string   "value",      limit: 255
    t.datetime "created_at",             null: false
    t.datetime "updated_at",             null: false
  end

  create_table "users", primary_key: "uid", force: :cascade do |t|
    t.string  "name",             limit: 60,                                   default: "",  null: false
    t.string  "pass",             limit: 32,                                   default: "",  null: false
    t.string  "mail",             limit: 64,                                   default: ""
    t.integer "mode",             limit: 1,                                    default: 0,   null: false
    t.integer "sort",             limit: 1,                                    default: 0
    t.integer "threshold",        limit: 1,                                    default: 0
    t.string  "theme",            limit: 255,                                  default: "",  null: false
    t.string  "signature",        limit: 255,                                  default: "",  null: false
    t.integer "signature_format", limit: 2,                                    default: 0,   null: false
    t.integer "created",          limit: 4,                                    default: 0,   null: false
    t.integer "access",           limit: 4,                                    default: 0,   null: false
    t.integer "login",            limit: 4,                                    default: 0,   null: false
    t.integer "status",           limit: 1,                                    default: 0,   null: false
    t.string  "timezone",         limit: 8
    t.string  "language",         limit: 12,                                   default: "",  null: false
    t.string  "picture",          limit: 255,                                  default: "",  null: false
    t.string  "init",             limit: 64,                                   default: ""
    t.text    "data",             limit: 4294967295
    t.integer "timezone_id",      limit: 4,                                    default: 0,   null: false
    t.string  "timezone_name",    limit: 50,                                   default: "",  null: false
    t.decimal "lat",                                 precision: 20, scale: 10, default: 0.0
    t.decimal "lon",                                 precision: 20, scale: 10, default: 0.0
  end

  add_index "users", ["access"], name: "index_users_access", using: :btree
  add_index "users", ["created"], name: "index_users_created", using: :btree
  add_index "users", ["mail"], name: "index_users_mail", using: :btree
  add_index "users", ["name"], name: "index_users_name", using: :btree
  add_index "users", ["uid"], name: "index_users_uid", using: :btree

end
